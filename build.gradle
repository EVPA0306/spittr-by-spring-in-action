/*
 * This build file was generated by the Gradle 'init' task.
 *
 * This generated file contains a commented-out sample Java project to get you started.
 * For more details take a look at the Java Quickstart chapter in the Gradle
 * user guide available at https://docs.gradle.org/4.2.1/userguide/tutorial_java_projects.html
 */


// Apply the java plugin to add support for Java
apply plugin: 'java'
apply plugin: 'war'

buildscript{
    ext {
        springVersion = '4.3.10.RELEASE'
        springSecurityVersion = '4.2.3.RELEASE'
        h2Version = '1.4.182'
    }
}

// In this section you declare where to find the dependencies of your project
repositories {
    // Use 'jcenter' for resolving your dependencies.
    // You can declare any Maven/Ivy/file repository here.
    jcenter()
}

// In this section you declare the dependencies for your production and test code
dependencies {
    // The production code uses the SLF4J logging API at compile time
    compile 'org.slf4j:slf4j-api:1.7.25'
    compile "org.springframework:spring-aop:${springVersion}"
    compile "org.springframework:spring-aspects:${springVersion}"
    compile "org.springframework:spring-beans:${springVersion}"
    compile "org.springframework:spring-context:${springVersion}"
    compile "org.springframework:spring-context-support:${springVersion}"
    compile "org.springframework:spring-core:${springVersion}"
    compile "org.springframework:spring-expression:${springVersion}"
    compile "org.springframework:spring-instrument:${springVersion}"
    compile "org.springframework:spring-instrument-tomcat:${springVersion}"
    compile "org.springframework:spring-jms:${springVersion}"
    compile "org.springframework:spring-messaging:${springVersion}"
    compile "org.springframework:spring-orm:${springVersion}"
    compile "org.springframework:spring-oxm:${springVersion}"
    compile "org.springframework:spring-test:${springVersion}"
    compile "org.springframework:spring-tx:${springVersion}"
    compile "org.springframework:spring-web:${springVersion}"
    compile "org.springframework:spring-webmvc-portlet:${springVersion}"
    compile "org.springframework:spring-websocket:${springVersion}"

    compile "org.springframework:spring-webmvc:${springVersion}"
    compile "org.springframework:spring-jdbc:${springVersion}"
    //Security
    compile "org.springframework.security:spring-security-config:${springSecurityVersion}"
    compile "org.springframework.security:spring-security-web:${springSecurityVersion}"
    //compile "com.h2database:h2:${h2Version}"
    compile "com.impossibl.pgjdbc-ng:pgjdbc-ng:0.7"
    compile "org.hibernate:hibernate-core:5.+"
    compile "com.zaxxer:HikariCP:2.7.2"
    compile "javax.inject:javax.inject:${javax_inject_version}"

    //compile('org.springframework.boot:spring-boot-actuator:1.2.5.RELEASE'){
    //    exclude group: 'org.springframework.boot', module:'spring-boot-autoconfigure'
    //    exclude group: 'org.springframework.boot', module:'spring-boot-starter-logging'
    //}



    compile "org.springframework.data:spring-data-jpa:${springDataJpaVersion}"
    compile 'javax.servlet:jstl:1.2'
    compile 'javax.servlet:javax.servlet-api:4.+'

    // Declare the dependency for your favourite test framework you want to use in your tests.
    // TestNG is also supported by the Gradle Test task. Just change the
    // testCompile dependency to testCompile 'org.testng:testng:6.8.1' and add
    // 'test.useTestNG()' to your build script.
    testCompile "junit:junit:4.12"
    testCompile "org.springframework:spring-test:${springVersion}"
    testCompile ("org.mockito:mockito-all:1.10.19")
    testCompile "org.hamcrest:hamcrest-library:1.3"
}

task copyWarToTomCat(type: Copy) {
    description 'Copies war-file to TomCat webapps dir '
    from("$buildDir/libs") {
        include '*.war'
    }
    into '/opt/apache-tomcat-8.0.30/webapps'

    dependsOn war
}


task copyWarToJBOSS(type: Copy) {
    description 'Copies war-file to JBOSS tmp dir '
    from("$buildDir/libs") {
        include '*.war'
    }
    into '/Users/evgenypavlenko/Projects/jboss-eap-7.0/standalone/deployments'

    dependsOn war
}
